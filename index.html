<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>The Blaze Java | Postulaciones</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:radial-gradient(circle at top,#111,#000);
  color:#e4e6eb;
}
.container{
  max-width:900px;
  margin:auto;
  padding:40px 20px
}
.card{
  background:linear-gradient(180deg,#0f1115,#0a0b0e);
  border-radius:16px;
  padding:30px;
  box-shadow:0 0 40px rgba(0,0,0,.8);
}
h1{text-align:center}

label{
  font-size:16px;
  display:block;
  margin-bottom:10px
}
input, textarea, select{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  background:#2b2d31;
  color:white;
  font-size:15px
}
button{
  margin-top:30px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#43b581,#2ea043);
  color:white;
  font-size:16px;
  font-weight:bold;
  cursor:pointer
}

/* ADMIN */
.admin-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#5865f2;
  padding:12px 18px;
  border-radius:14px;
  z-index:100
}
.admin-panel{
  display:none;
  position:fixed;
  inset:0;
  background:#0b0d10;
  z-index:200;
  overflow-y:auto;
}
.admin-container{
  max-width:1100px;
  margin:auto;
  padding:40px
}
.post{
  background:#111;
  padding:25px;
  border-radius:16px;
  margin-bottom:25px;
  box-shadow:0 0 25px rgba(0,0,0,.6)
}
.post h3{
  margin:0 0 5px;
}
.post small{
  color:#9da1a9
}
.post-section{
  margin-top:15px;
}
.post-section b{
  display:block;
  color:#43b581;
  margin-bottom:5px
}
.delete{
  background:#f04747;
  margin-top:20px
}
.close{
  background:#2b2d31;
  margin-top:10px
}
</style>
</head>

<body>

<button class="admin-btn" onclick="abrirAdmin()">ðŸ›  Admin</button>

<div class="container">
<h1>PostulaciÃ³n | Soporte</h1>

<div class="card">
  <label id="pregunta"></label>
  <div id="input"></div>
  <button onclick="siguiente()" id="btn">Siguiente</button>
</div>
</div>

<!-- PANEL ADMIN -->
<div class="admin-panel" id="admin">
<div class="admin-container">
<h1>Panel de Administradores</h1>

<input id="pass" type="password" placeholder="ContraseÃ±a admin">
<button onclick="loginAdmin()">Entrar</button>

<div id="lista"></div>

<button class="close" onclick="cerrarAdmin()">Cerrar panel</button>
</div>
</div>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const supabase = createClient(
  "https://bvbneelfosacutwhjzhx.supabase.co",
  "sb_publishable_8QluYXwqMPxYWszgJlCbzw_EdakwSl-"
);

const preguntas=[
 {k:"id_conocimiento",t:"ID / conocimientos",type:"textarea"},
 {k:"sanciones",t:"Sanciones en Minecraft",type:"textarea"},
 {k:"sanciones_dc",t:"Sanciones Discord TheBlaze",type:"textarea"},
 {k:"nick_mc",t:"Nick Minecraft",type:"input"},
 {k:"activo_mc",t:"Activo en Minecraft",type:"select",o:["Si","No"]},
 {k:"tiempo_mc",t:"Tiempo jugando Minecraft",type:"input"},
 {k:"discord",t:"Nick Discord",type:"input"},
 {k:"diferencia_spam",t:"Spam vs Flood",type:"textarea"},
 {k:"warn",t:"Â¿QuÃ© es un Warn?",type:"textarea"},
 {k:"premium",t:"Premium",type:"select",o:["Si","No"]},
 {k:"edad",t:"Edad",type:"select",o:["Menos de 12","12","MÃ¡s de 12"]},
 {k:"bots",t:"Bots que no estÃ©n en TheBlaze",type:"textarea"},
 {k:"staff_otro",t:"Staff en otra network",type:"select",o:["Si","No"]},
 {k:"acepta_staff",t:"Acepta rol staff",type:"select",o:["Si","No"]},
 {k:"exp_staff",t:"Experiencia staff",type:"textarea"},
 {k:"exp_programador",t:"Experiencia programador",type:"textarea"},
 {k:"ilegal_servidor",t:"AcciÃ³n ante ilegal",type:"textarea"},
 {k:"cmds_discord",t:"Comandos Discord",type:"textarea"},
 {k:"cmds_nautic",t:"Comandos Nautic",type:"textarea"},
 {k:"amigo_ilegal",t:"Amigo ilegal",type:"textarea"},
 {k:"staff_corrupto",t:"Staff corrupto",type:"textarea"}
];

let i=0,respuestas={};
const pregunta=document.getElementById("pregunta");
const inputDiv=document.getElementById("input");
const btn=document.getElementById("btn");

function render(){
 const p=preguntas[i];
 pregunta.innerText=p.t;
 inputDiv.innerHTML="";
 let el;
 if(p.type==="textarea") el=document.createElement("textarea");
 else if(p.type==="select"){
   el=document.createElement("select");
   p.o.forEach(v=>{let o=document.createElement("option");o.text=v;el.add(o);});
 } else el=document.createElement("input");
 el.id="respuesta";
 inputDiv.appendChild(el);
 btn.innerText=i===preguntas.length-1?"Enviar PostulaciÃ³n":"Siguiente";
}

window.siguiente=async()=>{
 const val=document.getElementById("respuesta").value;
 if(!val) return alert("Responde la pregunta");
 respuestas[preguntas[i].k]=val;
 if(i===preguntas.length-1){
   await supabase.from("postulaciones").insert([respuestas]);
   alert("âœ… PostulaciÃ³n enviada");
   location.reload();
 } else { i++; render(); }
};
render();

/* ADMIN */
window.abrirAdmin=()=>admin.style.display="block";
window.cerrarAdmin=()=>admin.style.display="none";

window.loginAdmin=async()=>{
 if(pass.value!=="1.21 #3 parcelas") return alert("âŒ Incorrecta");
 const {data}=await supabase.from("postulaciones").select("*").order("created_at",{ascending:false});
 lista.innerHTML="";
 data.forEach(p=>{
   lista.innerHTML+=`
   <div class="post">
     <h3>${p.nick_mc} | ${p.discord}</h3>
     <small>${new Date(p.created_at).toLocaleString()}</small>

     ${Object.keys(p).filter(k=>!["id","created_at","nick_mc","discord"].includes(k)).map(k=>`
       <div class="post-section">
         <b>${k.replaceAll("_"," ").toUpperCase()}</b>
         <div>${p[k]}</div>
       </div>
     `).join("")}

     <button class="delete" onclick="borrar(${p.id})">Borrar</button>
   </div>`;
 });
};

window.borrar=async(id)=>{
 await supabase.from("postulaciones").delete().eq("id",id);
 loginAdmin();
};
</script>

</body>
</html>



