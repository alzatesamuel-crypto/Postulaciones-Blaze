<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>The Blaze Java | Postulaciones</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:radial-gradient(circle at top,#111,#000);
    color:#e4e6eb;
}
.container{max-width:1200px;margin:auto;padding:40px 20px}
h1{text-align:center;margin-bottom:40px}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px}

.card{
    background:linear-gradient(180deg,#0f1115,#0a0b0e);
    border-radius:16px;
    padding:25px;
    box-shadow:0 0 40px rgba(0,0,0,.8);
}
.icon{
    width:50px;height:50px;
    background:#7c6a00;
    border-radius:12px;
    display:flex;align-items:center;justify-content:center;
    margin-bottom:20px
}
.alert{
    margin:20px 0;
    padding:12px;
    border-radius:10px;
    background:rgba(67,181,129,.15);
    color:#43b581;
}
button{
    padding:12px;
    border-radius:10px;
    border:none;
    font-weight:bold;
    cursor:pointer;
}
.btn-open{background:#2ea043;color:white}
.admin{margin-top:10px;background:#5865f2;color:white}

/* MODAL */
.modal{
    position:fixed;inset:0;
    background:rgba(0,0,0,.8);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:10
}
.modal-content{
    background:#1c1f26;
    padding:30px;
    border-radius:16px;
    max-width:600px;
    width:90%;
    max-height:80vh;
    overflow-y:auto;
}
label{display:block;margin-top:15px}
input, textarea{
    width:100%;
    padding:10px;
    margin-top:5px;
    border-radius:8px;
    border:none;
    background:#2b2d31;
    color:white;
}
.modal button{margin-top:20px;width:100%;background:#5865f2;color:white}
.btn-eliminar{background:#f04747;color:white;padding:6px;border-radius:6px;margin-top:10px}
</style>
</head>

<body>

<div class="container">
<h1>Postulaciones The Blaze Java</h1>

<div class="cards">
<div class="card">
<div class="icon">游늯</div>
<h2>Rango SOPORTE</h2>
<p>Postulaci칩n para formar parte del equipo de soporte.</p>
<div class="alert">游릭 Postulaci칩n ABIERTA</div>
<button class="btn-open" onclick="abrir()">Postularse</button>
<button class="admin" onclick="mostrarPostulaciones()">Ver postulaciones (Admin)</button>
</div>
</div>
</div>

<div class="modal" id="modal">
<div class="modal-content">
<h3 id="modalTitle"></h3>
<div id="questions"></div>
<button onclick="enviar()">Enviar</button>
</div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "PEGA_AQUI_TU_APIKEY",
  authDomain: "TU_PROYECTO.firebaseapp.com",
  projectId: "TU_PROYECTO"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.db = db;
window.fb = { collection, addDoc, getDocs, deleteDoc, doc };
</script>

<script>
const preguntas = [
"Tu nombre de Discord:",
"쯇or qu칠 quieres ser soporte?",
"쮺u치nto tiempo puedes dedicar?",
"쯊ienes experiencia?"
];

const adminPassword = "1.21 #3 parcelas";

function abrir(){
  document.getElementById("modal").style.display="flex";
  document.getElementById("modalTitle").textContent="Postulaci칩n SOPORTE";
  const q=document.getElementById("questions");
  q.innerHTML="";
  preguntas.forEach(p=>{
    q.innerHTML+=`<label>${p}</label><textarea required></textarea>`;
  });
}

async function enviar(){
  const inputs=document.querySelectorAll("#questions textarea");
  const respuestas=[];
  inputs.forEach(i=>respuestas.push(i.value.trim()));

  if(!respuestas[0]){ alert("Completa todo"); return; }

  await fb.addDoc(fb.collection(db,"postulaciones"),{
    rango:"soporte",
    respuestas,
    fecha:new Date().toISOString()
  });

  document.getElementById("modal").style.display="none";
  alert("Postulaci칩n enviada correctamente");
}

async function mostrarPostulaciones(){
  const pass=prompt("Contrase침a admin:");
  if(pass!==adminPassword) return alert("Incorrecta");

  const snap=await fb.getDocs(fb.collection(db,"postulaciones"));
  let html="";
  snap.forEach(d=>{
    const data=d.data();
    html+=`
    <div style="border:1px solid #555;padding:10px;margin-bottom:10px">
      ${data.respuestas.join("<br>")}
      <button class="btn-eliminar" onclick="eliminar('${d.id}')">Eliminar</button>
    </div>`;
  });

  document.getElementById("modalTitle").textContent="Postulaciones";
  document.getElementById("questions").innerHTML=html||"No hay postulaciones";
  document.getElementById("modal").style.display="flex";
}

async function eliminar(id){
  if(!confirm("Eliminar?"))return;
  await fb.deleteDoc(fb.doc(db,"postulaciones",id));
  mostrarPostulaciones();
}
</script>

</body>
</html>




