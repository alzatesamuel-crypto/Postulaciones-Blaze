<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>The Blaze Java | Postulaciones</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:radial-gradient(circle at top,#111,#000);
  color:#e4e6eb;
}
.container{
  max-width:800px;
  margin:auto;
  padding:40px 20px
}
.card{
  background:linear-gradient(180deg,#0f1115,#0a0b0e);
  border-radius:16px;
  padding:30px;
  box-shadow:0 0 40px rgba(0,0,0,.8);
}
h1{text-align:center}
.question{
  margin-top:30px;
}
label{
  font-size:16px;
  display:block;
  margin-bottom:10px
}
input, textarea, select{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  background:#2b2d31;
  color:white;
  font-size:15px
}
button{
  margin-top:30px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#43b581,#2ea043);
  color:white;
  font-size:16px;
  font-weight:bold;
  cursor:pointer
}

/* ADMIN */
.admin-btn{
  position:fixed;
  bottom:20px;
  right:20px;
  background:#5865f2;
  padding:12px 16px;
  border-radius:10px;
  z-index:100
}
.admin-panel{
  display:none;
  position:fixed;
  inset:0;
  background:#0b0d10;
  z-index:200;
  overflow-y:auto;
}
.post{
  background:#111;
  padding:20px;
  border-radius:12px;
  margin-bottom:20px
}
.delete{
  background:#f04747;
  margin-top:10px
}
</style>
</head>

<body>

<button class="admin-btn" onclick="abrirAdmin()">ðŸ›  Admin</button>

<div class="container">
<h1>PostulaciÃ³n | Soporte</h1>

<div class="card">
  <div id="form">
    <div class="question">
      <label id="pregunta"></label>
      <div id="input"></div>
    </div>
    <button onclick="siguiente()" id="btn">Siguiente</button>
  </div>
</div>
</div>

<!-- PANEL ADMIN -->
<div class="admin-panel" id="admin">
<div class="container">
<h1>Panel Admin</h1>
<input id="pass" type="password" placeholder="ContraseÃ±a admin">
<button onclick="loginAdmin()">Entrar</button>
<div id="lista"></div>
<button class="delete" onclick="cerrarAdmin()">Cerrar panel</button>
</div>
</div>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const supabase = createClient(
  "https://bvbneelfosacutwhjzhx.supabase.co",
  "sb_publishable_8QluYXwqMPxYWszgJlCbzw_EdakwSl-"
);

const preguntas = [
 {k:"id_conocimiento", t:"Â¿Tienes conocimientos en la ID? Si es asÃ­ envÃ­anos tu ID", type:"textarea"},
 {k:"sanciones", t:"Â¿QuÃ© sanciones tienes o has tenido en Minecraft?", type:"textarea"},
 {k:"sanciones_dc", t:"Â¿QuÃ© sanciones tienes en Discord de TheBlaze?", type:"textarea"},
 {k:"nick_mc", t:"Â¿CuÃ¡l es tu Nick de Minecraft?", type:"input"},
 {k:"activo_mc", t:"Â¿Eres activo en Minecraft?", type:"select", o:["Si","No"]},
 {k:"tiempo_mc", t:"Â¿CuÃ¡nto tiempo llevas jugando Minecraft?", type:"input"},
 {k:"discord", t:"Â¿CuÃ¡l es tu Nick de Discord?", type:"input"},
 {k:"diferencia_spam", t:"Â¿CuÃ¡l es la diferencia entre Spam y Flood?", type:"textarea"},
 {k:"warn", t:"Â¿QuÃ© es un Warn? EscrÃ­belo con tus palabras", type:"textarea"},
 {k:"premium", t:"Â¿Eres Premium?", type:"select", o:["Si","No"]},
 {k:"edad", t:"Â¿CuÃ¡ntos aÃ±os tienes?", type:"select", o:["Menos de 12","12","MÃ¡s de 12"]},
 {k:"bots", t:"Dime 10 bots que NO estÃ©n en TheBlaze", type:"textarea"},
 {k:"staff_otro", t:"Â¿Eres staff de otra network?", type:"select", o:["Si","No"]},
 {k:"acepta_staff", t:"Â¿Aceptas que todos los staff tengan el mismo rol?", type:"select", o:["Si","No"]},
 {k:"exp_staff", t:"Â¿Tienes experiencia como staff?", type:"textarea"},
 {k:"exp_programador", t:"Â¿Tienes experiencia como programador?", type:"textarea"},
 {k:"ilegal_servidor", t:"Si alguien hace algo ilegal en el servidor, Â¿quÃ© harÃ­as?", type:"textarea"},
 {k:"cmds_discord", t:"Dime 10 comandos Ãºtiles para moderar en Discord", type:"textarea"},
 {k:"cmds_nautic", t:"Dime 10 comandos Ãºtiles para jugar Nautic", type:"textarea"},
 {k:"amigo_ilegal", t:"Si tu amigo hace algo ilegal en Discord, Â¿quÃ© harÃ­as?", type:"textarea"},
 {k:"staff_corrupto", t:"Â¿QuÃ© harÃ­as si encuentras un staff corrupto en TheBlaze?", type:"textarea"}
];

let i = 0;
const respuestas = {};

const pregunta = document.getElementById("pregunta");
const inputDiv = document.getElementById("input");
const btn = document.getElementById("btn");

function render(){
  const p = preguntas[i];
  pregunta.innerText = p.t;
  inputDiv.innerHTML = "";

  let el;
  if(p.type==="textarea"){
    el=document.createElement("textarea");
  }else if(p.type==="select"){
    el=document.createElement("select");
    p.o.forEach(v=>{
      const op=document.createElement("option");
      op.text=v; el.add(op);
    });
  }else{
    el=document.createElement("input");
  }
  el.id="respuesta";
  inputDiv.appendChild(el);

  btn.innerText = i === preguntas.length-1 ? "Enviar PostulaciÃ³n" : "Siguiente";
}

window.siguiente = async ()=>{
  const val = document.getElementById("respuesta").value;
  if(!val) return alert("Responde la pregunta");
  respuestas[preguntas[i].k]=val;

  if(i === preguntas.length-1){
    await supabase.from("postulaciones").insert([respuestas]);
    alert("âœ… PostulaciÃ³n enviada correctamente");
    location.reload();
  }else{
    i++; render();
  }
};

render();

/* ADMIN */
window.abrirAdmin=()=>admin.style.display="block";
window.cerrarAdmin=()=>admin.style.display="none";

window.loginAdmin=async()=>{
 if(pass.value!=="1.21 #3 parcelas") return alert("âŒ Incorrecta");
 const {data}=await supabase.from("postulaciones").select("*").order("created_at",{ascending:false});
 lista.innerHTML="";
 data.forEach(p=>{
   lista.innerHTML+=`<div class="post"><pre>${JSON.stringify(p,null,2)}</pre>
   <button class="delete" onclick="borrar(${p.id})">Borrar</button></div>`;
 });
};

window.borrar=async(id)=>{
 await supabase.from("postulaciones").delete().eq("id",id);
 loginAdmin();
};
</script>

</body>
</html>



